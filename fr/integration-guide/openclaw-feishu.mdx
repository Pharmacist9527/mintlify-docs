---
title: "OpenClaw + Feishu"
description: "Connecter OpenClaw à EvoLink.AI via Feishu (Lark)"
---

## Aperçu

OpenClaw est une passerelle d'agents IA open-source qui sert de pont entre les applications de messagerie et les agents IA. Grâce à un processus de passerelle centralisé, elle connecte des plateformes de messagerie telles que Telegram, WhatsApp, Discord et Feishu (Lark) à des agents de programmation IA, permettant des interactions de programmation IA directement dans les fenêtres de discussion.

En configurant **EvoLink API** comme fournisseur de modèles personnalisé dans OpenClaw et en connectant un **bot Feishu**, vous pouvez utiliser les modèles Claude d'EvoLink (tels que **Claude 4.6 Opus**, **Claude 4.5 Sonnet**, **Claude 4.5 Haiku**) pour des conversations de programmation assistées par IA directement dans Feishu.

Le canal Feishu utilise le mode **connexion longue WebSocket** pour recevoir les messages — aucune URL publique n'est requise.

**Ce guide couvre :**
- L'installation et la configuration de la passerelle OpenClaw
- La création d'une application d'entreprise Feishu avec la capacité bot
- La configuration d'EvoLink API comme fournisseur de modèles personnalisé
- La vérification de la connexion et la mise en route

## Prérequis

Avant de configurer, assurez-vous d'avoir :

### 1. Installer Node.js

OpenClaw s'installe via npm. Vous devez d'abord installer [Node.js](https://nodejs.org/fr/download).

### 2. Obtenir une clé API EvoLink

- Connectez-vous au [tableau de bord EvoLink](https://evolink.ai/dashboard)
- Trouvez les clés API dans le tableau de bord, cliquez sur le bouton « Créer une nouvelle clé », puis copiez la clé générée
- La clé API commence généralement par `sk-`

### 3. Préparer un compte Feishu

Vous avez besoin d'un compte entreprise Feishu pour créer des applications sur la plateforme ouverte Feishu.

## Étape 1 : Installer OpenClaw

Exécutez la commande suivante dans votre terminal :

```bash
npm install -g openclaw@latest
```

Installez le plugin Feishu :

```bash
openclaw plugins install @openclaw/feishu
```

## Étape 2 : Configuration initiale

Exécutez la commande de configuration initiale. OpenClaw vous guidera à travers la configuration et installera le service daemon en arrière-plan :

```bash
openclaw onboard --install-daemon
```

### 1. Confirmer l'installation

Le système affichera un avertissement de risque. Confirmez pour continuer :

![Confirmer l'installation](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011629_241.png)

### 2. Sélectionner le mode d'installation

Lorsqu'on vous demande de choisir un mode d'installation, sélectionnez **Quickstart** :

![Sélectionner Quickstart](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011705_241.png)

### 3. Sélectionner le fournisseur

Lorsqu'on vous demande de choisir un fournisseur de modèles, sélectionnez **Skip**. Nous configurerons manuellement EvoLink comme fournisseur personnalisé plus tard :

![Ignorer la sélection du fournisseur](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011742_033.png)

### 4. Sélectionner les modèles

Lorsqu'on vous demande de choisir les modèles à activer, sélectionnez **All** :

![Sélectionner tous les modèles](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011808_857.png)

### 5. Sélectionner le modèle par défaut

Lorsqu'on vous demande de choisir un modèle par défaut, sélectionnez **Keep current** :

![Conserver le modèle actuel](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011825_375.png)

## Étape 3 : Créer une application Feishu

### 1. Se connecter à la plateforme ouverte Feishu

Rendez-vous sur la [plateforme ouverte Feishu](https://open.feishu.cn/app) et connectez-vous avec votre compte Feishu.

<Note>
Pour Lark (version internationale), utilisez [https://open.larksuite.com/app](https://open.larksuite.com/app) et définissez `domain: "lark"` dans la configuration.
</Note>

### 2. Créer une application

Cliquez sur **Créer une application auto-construite d'entreprise**, remplissez le nom et la description de l'application, et choisissez une icône.

![Créer une application](/images/OpenClaw-Feishu/create-app.avif)

### 3. Obtenir les identifiants

Sur la page **Identifiants et informations de base**, copiez :

- **App ID** (format : `cli_xxx`)
- **App Secret**

<Warning>
Gardez votre App Secret en sécurité. Ne le partagez pas avec d'autres personnes.
</Warning>

![Obtenir les identifiants](/images/OpenClaw-Feishu/get-credentials.avif)

### 4. Configurer les permissions

Sur la page **Gestion des permissions**, cliquez sur **Importation par lot** et collez le JSON suivant pour importer toutes les permissions requises :

```json
{
  "scopes": {
    "tenant": [
      "aily:file:read",
      "aily:file:write",
      "application:application.app_message_stats.overview:readonly",
      "application:application:self_manage",
      "application:bot.menu:write",
      "cardkit:card:write",
      "contact:contact.base:readonly",
      "contact:user.employee_id:readonly",
      "corehr:file:download",
      "docs:document.content:read",
      "event:ip_list",
      "im:chat",
      "im:chat.access_event.bot_p2p_chat:read",
      "im:chat.members:bot_access",
      "im:message",
      "im:message.group_at_msg:readonly",
      "im:message.group_msg",
      "im:message.p2p_msg:readonly",
      "im:message:readonly",
      "im:message:send_as_bot",
      "im:resource",
      "sheets:spreadsheet",
      "wiki:wiki:readonly"
    ],
    "user": [
      "aily:file:read",
      "aily:file:write",
      "im:chat.access_event.bot_p2p_chat:read"
    ]
  }
}
```

![Configurer les permissions](/images/OpenClaw-Feishu/configure-permissions.avif)

### 5. Activer la capacité bot

Dans la barre latérale gauche, cliquez sur **Capacités de l'application**, trouvez la carte **Bot** et basculez le **statut du menu** sur activé. Une fois activé, remplissez le nom et la description du bot — les utilisateurs les verront lorsqu'ils rechercheront ou discuteront avec le bot dans Feishu.

![Activer la capacité bot](/images/OpenClaw-Feishu/enable-bot.png)

### 6. Configurer les abonnements aux événements

<Warning>
Avant de configurer les abonnements aux événements, assurez-vous d'avoir :
- Terminé la configuration du canal Feishu (voir Étape 4)
- La passerelle est en cours d'exécution (vérifiez avec `openclaw gateway status`)
</Warning>

Sur la page **Abonnements aux événements** :

1. Sélectionnez **Utiliser la connexion longue pour recevoir les événements** (mode WebSocket)
2. Ajoutez l'événement : `im.message.receive_v1` (Recevoir un message)

<Warning>
Si la passerelle n'est pas en cours d'exécution ou si le canal n'a pas été ajouté, la configuration de la connexion longue échouera lors de la sauvegarde.
</Warning>

![Configurer les abonnements aux événements](/images/OpenClaw-Feishu/event-subscription.avif)

### 7. Publier l'application

Allez dans **Gestion des versions et publication**, créez une version, soumettez-la pour examen et publiez-la. Les applications auto-construites d'entreprise sont généralement approuvées automatiquement.

## Étape 4 : Configurer OpenClaw

La configuration d'OpenClaw est centralisée dans `~/.openclaw/openclaw.json`. Il y a trois domaines de configuration clés :

- `plugins.entries.*` — Contrôle les plugins à charger
- `channels.*` — Contrôle les connexions des canaux et les identifiants de compte
- `models.providers.*` — Contrôle les fournisseurs de modèles

### 1. Ajouter le canal Feishu

<Tabs>
  <Tab title="Configuration manuelle">
    Ouvrez `~/.openclaw/openclaw.json` :

    Activez le plugin Feishu (`plugins.entries`) :

    ```json
    "plugins": {
      "entries": {
        "feishu": {
          "enabled": true
        }
      }
    }
    ```

    Configurez les identifiants du canal Feishu (`channels.feishu`) :

    ```json
    "channels": {
      "feishu": {
        "enabled": true,
        "dmPolicy": "pairing",
        "accounts": {
          "main": {
            "appId": "cli_xxx",
            "appSecret": "your-app-secret",
            "botName": "My AI Assistant"
          }
        }
      }
    }
    ```

    <Warning>
    Les identifiants Feishu doivent être placés sous `channels.feishu.accounts`, PAS sous `plugins.entries.feishu`. Les placer au mauvais endroit provoquera une erreur `Unrecognized key`.
    </Warning>

    Vous pouvez également configurer via des variables d'environnement :

    ```bash
    export FEISHU_APP_ID="cli_xxx"
    export FEISHU_APP_SECRET="xxx"
    ```
  </Tab>
  <Tab title="Commande CLI">
    Exécutez la commande suivante, sélectionnez Feishu, et entrez votre App ID et App Secret lorsque demandé :

    ```bash
    openclaw channels add
    ```

    <Warning>
    Les versions plus récentes d'OpenClaw peuvent avoir des conflits de configuration avec cette commande. La configuration manuelle est recommandée.
    </Warning>
  </Tab>
</Tabs>

### 2. Configurer EvoLink API

Dans le même fichier `openclaw.json`, trouvez le champ `models` et ajoutez EvoLink comme fournisseur de modèles personnalisé :

```json
"models": {
  "providers": {
    "anthropic": {
      "api": "anthropic-messages",
      "baseUrl": "https://code.evolink.ai",
      "apiKey": "your-evolink-api-key",
      "models": [
        {
          "id": "claude-opus-4-6",
          "name": "Claude Opus 4.6",
          "reasoning": false,
          "input": ["text"],
          "cost": {
            "input": 0,
            "output": 0,
            "cacheRead": 0,
            "cacheWrite": 0
          },
          "contextWindow": 200000,
          "maxTokens": 8192
        }
      ]
    }
  }
}
```

<Warning>
Remplacez `"your-evolink-api-key"` par la clé API réelle de votre [tableau de bord EvoLink](https://evolink.ai/dashboard).
</Warning>

### 3. Configurer le modèle par défaut

Dans le champ `agents`, définissez le modèle par défaut :

```json
"model": {
  "primary": "anthropic/claude-opus-4-6"
}
```

### 4. Redémarrer la passerelle

Redémarrez la passerelle OpenClaw pour appliquer la configuration :

```bash
openclaw gateway restart
```

<Warning>
Utilisez toujours `openclaw gateway restart` au lieu de démarrer manuellement un autre processus, sinon vous obtiendrez une erreur de conflit de port.
</Warning>

Vérifiez que la configuration est chargée correctement :

```bash
openclaw gateway status
```

## Étape 5 : Vérifier la connexion

### 1. Trouver le bot dans Feishu

Ouvrez Feishu, recherchez le nom du bot que vous avez créé et démarrez une conversation.

### 2. Obtenir le code d'appairage

Envoyez n'importe quel message au bot. Il renverra un code d'appairage.

### 3. Compléter l'appairage

Ouvrez une nouvelle fenêtre de terminal et exécutez :

```bash
openclaw pairing approve feishu <pairing-code>
```

<Warning>
Remplacez `<pairing-code>` par le code réel renvoyé par le bot. Assurez-vous de supprimer les chevrons `<>`.
</Warning>

### 4. Tester la connexion

Une fois l'appairage terminé, envoyez un message au bot dans Feishu :

```
Bonjour, veuillez vous présenter
```

Si vous recevez une réponse de l'IA, l'intégration est terminée.

## Contrôle d'accès

### Accès par message direct

Par défaut `dmPolicy: "pairing"` — les utilisateurs inconnus recevront un code d'appairage qui doit être approuvé par un administrateur :

```bash
openclaw pairing list feishu        # Voir les approbations en attente
openclaw pairing approve feishu <CODE>  # Approuver
```

Vous pouvez également configurer une liste blanche d'Open IDs utilisateur via `channels.feishu.allowFrom`.

### Accès aux groupes

La politique de groupe est contrôlée via `channels.feishu.groupPolicy` :

- `"open"` — Autoriser tous les utilisateurs du groupe (par défaut)
- `"allowlist"` — Autoriser uniquement les utilisateurs dans `groupAllowFrom`
- `"disabled"` — Désactiver les messages de groupe

Par défaut, le bot ne répond que lorsqu'il est @mentionné (`requireMention: true`).

## Commandes courantes

| Commande | Description |
|----------|-------------|
| `openclaw gateway status` | Vérifier le statut de la passerelle |
| `openclaw gateway restart` | Redémarrer le service de passerelle |
| `openclaw logs --follow` | Voir les journaux en temps réel |
| `openclaw pairing list feishu` | Voir les demandes d'appairage en attente |
| `openclaw plugins list` | Voir les plugins installés |

## Dépannage

| Problème | Solution |
|----------|----------|
| Le bot ne répond pas dans les groupes | Vérifiez si vous avez @mentionné le bot ; vérifiez si `groupPolicy` est `"disabled"` |
| Le bot ne reçoit pas de messages | Vérifiez si l'application est publiée et approuvée ; vérifiez que l'abonnement à l'événement `im.message.receive_v1` est configuré ; confirmez que le mode connexion longue WebSocket est sélectionné |
| App Secret divulgué | Réinitialisez l'App Secret sur la plateforme ouverte Feishu, mettez à jour la configuration, redémarrez la passerelle |
| Échec de l'envoi de messages | Vérifiez si la permission `im:message:send_as_bot` est accordée ; consultez les journaux avec `openclaw logs --follow` |
