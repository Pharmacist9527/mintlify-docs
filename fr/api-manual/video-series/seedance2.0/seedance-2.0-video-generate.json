{
  "openapi": "3.1.0",
  "info": {
    "title": "seedance-2.0 API",
    "description": "Créer des tâches de génération vidéo à l'aide de modèles IA, prenant en charge texte-vers-vidéo, image-vers-vidéo et édition vidéo-vers-vidéo avec le système de @-référence",
    "license": {
      "name": "MIT"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://api.evolink.ai",
      "description": "Environnement de production"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/v1/videos/generations": {
      "post": {
        "summary": "seedance-2.0 API",
        "description": "- Le modèle Seedance 2.0 (seedance-2.0) prend en charge plusieurs modes de génération, notamment texte-vers-vidéo, image-vers-vidéo et édition vidéo-vers-vidéo avec le système de @-référence\n- Mode de traitement asynchrone, utilisez l'ID de tâche retourné pour [consulter le statut](/fr/api-manual/task-management/get-task-detail)\n- Les liens vidéo générés sont valides pendant 24 heures, veuillez les sauvegarder rapidement",
        "operationId": "createVideoGeneration",
        "tags": [
          "Génération vidéo"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VideoGenerationRequest"
              },
              "examples": {
                "multimodal_generation": {
                  "summary": "Génération multimodale",
                  "value": {
                    "model": "seedance-2.0",
                    "prompt": "@Image1 as first frame, a cinematic drone shot over a coastal city at golden hour",
                    "image_urls": [
                      "https://example.com/ref1.jpg",
                      "https://example.com/ref2.jpg"
                    ],
                    "video_urls": [
                      "https://example.com/reference.mp4"
                    ],
                    "audio_urls": [
                      "https://example.com/reference.mp3"
                    ],
                    "duration": 10,
                    "quality": "1080p",
                    "aspect_ratio": "16:9",
                    "generate_audio": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tâche de génération vidéo créée avec succès",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VideoGenerationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Paramètres de requête invalides",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 400,
                    "message": "Invalid prompt parameter",
                    "type": "invalid_request_error",
                    "param": "prompt",
                    "fallback_suggestion": "provide a valid prompt"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Non authentifié, jeton invalide ou expiré",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 401,
                    "message": "Invalid or expired token",
                    "type": "authentication_error"
                  }
                }
              }
            }
          },
          "402": {
            "description": "Quota insuffisant, recharge requise",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 402,
                    "message": "Quota insuffisant",
                    "type": "insufficient_quota_error",
                    "fallback_suggestion": "https://evolink.ai/dashboard/billing"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Accès refusé",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 403,
                    "message": "Access denied for this model",
                    "type": "permission_error",
                    "param": "model"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Ressource introuvable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 404,
                    "message": "Specified model not found",
                    "type": "not_found_error",
                    "param": "model",
                    "fallback_suggestion": "seedance-2.0"
                  }
                }
              }
            }
          },
          "413": {
            "description": "Corps de la requête trop volumineux",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 413,
                    "message": "Corps de la requête trop volumineux",
                    "type": "request_too_large_error",
                    "fallback_suggestion": "reduce prompt length"
                  }
                }
              }
            }
          },
          "429": {
            "description": "Limite de débit dépassée",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 429,
                    "message": "Limite de débit dépassée",
                    "type": "rate_limit_error",
                    "fallback_suggestion": "retry after 60 seconds"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erreur interne du serveur",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 500,
                    "message": "Erreur interne du serveur",
                    "type": "internal_server_error",
                    "fallback_suggestion": "try again later"
                  }
                }
              }
            }
          },
          "502": {
            "description": "Erreur du service en amont",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 502,
                    "message": "Upstream AI service unavailable",
                    "type": "upstream_error",
                    "fallback_suggestion": "try different model"
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service temporairement indisponible",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 503,
                    "message": "Service temporairement indisponible",
                    "type": "service_unavailable_error",
                    "fallback_suggestion": "retry after 30 seconds"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "VideoGenerationRequest": {
        "type": "object",
        "required": [
          "model",
          "prompt"
        ],
        "properties": {
          "model": {
            "type": "string",
            "description": "Nom du modèle de génération vidéo",
            "enum": ["seedance-2.0"],
            "default": "seedance-2.0",
            "example": "seedance-2.0"
          },
          "prompt": {
            "type": "string",
            "description": "Prompt décrivant la vidéo que vous souhaitez générer, limité à 2000 tokens. Utilisez les tags @-référence pour attribuer des rôles aux fichiers téléchargés\n\n**Tags @-référence :**\n- `@Image1`, `@Image2`... → images de image_urls (dans l'ordre)\n- `@Video1`, `@Video2`... → vidéos de video_urls (dans l'ordre)\n- `@Audio1`, `@Audio2`... → audios de audio_urls (dans l'ordre)\n- Exemple : `@Image1 as first frame, replicate @Video1 camera movement, @Audio1 for BGM rhythm`",
            "example": "@Image1 as first frame, a cinematic drone shot over a coastal city at golden hour",
            "maxLength": 2000
          },
          "image_urls": {
            "type": "array",
            "description": "Liste d'URLs d'images de référence pour la génération image-vers-vidéo et multimodale\n\n**Note :**\n- Maximum `9` images par requête\n- Taille maximale : `30MB` par image\n- Formats de fichiers pris en charge : `.jpeg`, `.png`, `.webp`, `.bmp`, `.tiff`, `.gif`\n- Limite totale d'entrée mixte : `12` fichiers toutes modalités confondues\n- Les téléchargements de visages humains réalistes ne sont pas pris en charge et seront automatiquement rejetés\n- Les URLs des images doivent être directement accessibles par le serveur",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "maxItems": 9,
            "example": [
              "https://example.com/image.jpg"
            ]
          },
          "video_urls": {
            "type": "array",
            "description": "Liste d'URLs de vidéos de référence pour l'édition vidéo-vers-vidéo et le système de @-référence\n\n**Note :**\n- Maximum `3` vidéos par requête, durée totale `2–15` secondes\n- Taille maximale : `50MB` par vidéo\n- Formats de fichiers pris en charge : `.mp4`, `.mov`\n- Plage de pixels : `409 600` (480p) – `927 408` (720p)\n- L'utilisation de références vidéo augmentera le coût\n- Les téléchargements de visages humains réalistes ne sont pas pris en charge et seront automatiquement rejetés\n- Les URLs doivent être directement accessibles par le serveur",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "maxItems": 3,
            "example": [
              "https://example.com/reference.mp4"
            ]
          },
          "audio_urls": {
            "type": "array",
            "description": "Liste d'URLs audio de référence pour la génération pilotée par l'audio via le système de @-référence\n\n**Note :**\n- Maximum `3` pistes audio par requête, durée totale ≤ `15` secondes\n- Taille maximale : `15MB` par audio\n- Formats de fichiers pris en charge : `.mp3`, `.wav`\n- Aligne les coupes, l'énergie du mouvement et les transitions sur le beat et le rythme\n- Les URLs doivent être directement accessibles par le serveur",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "maxItems": 3,
            "example": [
              "https://example.com/reference.mp3"
            ]
          },
          "duration": {
            "type": "integer",
            "description": "Spécifie la durée de la vidéo générée (en secondes), par défaut `5` secondes\n\n**Note :**\n- Prend en charge toute valeur entière entre `4` et `15` secondes\n- La facturation d'une requête est basée sur la valeur de `duration` ; des durées plus longues entraînent des coûts plus élevés",
            "minimum": 4,
            "maximum": 15
          },
          "quality": {
            "type": "string",
            "description": "Résolution vidéo, par défaut `720p`\n\n**Note :**\n- `480p` : Résolution inférieure, tarification réduite\n- `720p` : Définition standard, tarification standard, c'est la valeur par défaut\n- `1080p` : Haute définition, tarification supérieure",
            "enum": [
              "480p",
              "720p",
              "1080p"
            ],
            "example": "720p"
          },
          "aspect_ratio": {
            "type": "string",
            "description": "Rapport d'aspect vidéo\n\n**Valeurs prises en charge :**\n- `16:9` (paysage), `9:16` (portrait), `1:1` (carré), `4:3`, `3:4`, `21:9` (ultra-large), `adaptive`\n- Valeur par défaut : `16:9`",
            "example": "16:9"
          },
          "generate_audio": {
            "type": "boolean",
            "description": "Indique s'il faut générer de l'audio, l'activation augmentera le coût, par défaut `true`\n\n**Options :**\n- `true` : La vidéo produite par le modèle inclut un audio synchronisé. Seedance 2.0 peut générer automatiquement des voix, des effets sonores et de la musique de fond correspondants en fonction des prompts textuels et du contenu visuel. Il est recommandé de placer les dialogues entre guillemets doubles pour optimiser la génération audio. Exemple : L'homme a arrêté la femme et a dit : \"Souviens-toi, tu ne dois jamais pointer la lune avec ton doigt.\"\n- `false` : La vidéo produite par le modèle est muette",
            "default": true,
            "example": true
          },
          "callback_url": {
            "type": "string",
            "description": "URL de rappel HTTPS après l'achèvement de la tâche\n\n**Moment du rappel :**\n- Déclenché lorsque la tâche est terminée, échouée ou annulée\n- Envoyé après la confirmation de la facturation\n\n**Restrictions de sécurité :**\n- Seul le protocole HTTPS est pris en charge\n- Les rappels vers les adresses IP du réseau interne sont interdits (127.0.0.1, 10.x.x.x, 172.16-31.x.x, 192.168.x.x, etc.)\n- La longueur de l'URL ne doit pas dépasser `2048` caractères\n\n**Mécanisme de rappel :**\n- Délai d'expiration : `10` secondes\n- Maximum de `3` tentatives après échec (les tentatives ont lieu après `1`/`2`/`4` secondes suivant l'échec)\n- Le format du corps de réponse du rappel est cohérent avec le format de réponse de l'API de consultation de tâche\n- Un code de statut 2xx retourné par l'URL de rappel est considéré comme réussi ; les autres codes de statut déclencheront des tentatives",
            "format": "uri",
            "example": "https://your-domain.com/webhooks/video-task-completed"
          }
        }
      },
      "VideoGenerationResponse": {
        "type": "object",
        "properties": {
          "created": {
            "type": "integer",
            "description": "Horodatage de création de la tâche",
            "example": 1761313744
          },
          "id": {
            "type": "string",
            "description": "ID de tâche",
            "example": "task-unified-1761313744-vux2jw0k"
          },
          "model": {
            "type": "string",
            "description": "Nom du modèle réellement utilisé",
            "example": "seedance-2.0"
          },
          "object": {
            "type": "string",
            "enum": [
              "video.generation.task"
            ],
            "description": "Type spécifique de la tâche"
          },
          "progress": {
            "type": "integer",
            "description": "Pourcentage de progression de la tâche (0-100)",
            "minimum": 0,
            "maximum": 100,
            "example": 0
          },
          "status": {
            "type": "string",
            "description": "Statut de la tâche",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ],
            "example": "pending"
          },
          "task_info": {
            "$ref": "#/components/schemas/VideoTaskInfo",
            "description": "Informations détaillées de la tâche vidéo"
          },
          "type": {
            "type": "string",
            "enum": [
              "text",
              "image",
              "audio",
              "video"
            ],
            "description": "Type de sortie de la tâche",
            "example": "video"
          },
          "usage": {
            "$ref": "#/components/schemas/VideoUsage",
            "description": "Informations d'utilisation et de facturation"
          }
        }
      },
      "VideoTaskInfo": {
        "type": "object",
        "properties": {
          "can_cancel": {
            "type": "boolean",
            "description": "Si la tâche peut être annulée",
            "example": true
          },
          "estimated_time": {
            "type": "integer",
            "description": "Temps d'achèvement estimé (secondes)",
            "minimum": 0,
            "example": 165
          },
          "video_duration": {
            "type": "integer",
            "description": "Durée de la vidéo (secondes)",
            "example": 8
          }
        }
      },
      "VideoUsage": {
        "type": "object",
        "description": "Informations d'utilisation et de facturation",
        "properties": {
          "billing_rule": {
            "type": "string",
            "description": "Règle de facturation",
            "enum": [
              "per_call",
              "per_token",
              "per_second"
            ],
            "example": "per_call"
          },
          "credits_reserved": {
            "type": "number",
            "description": "Crédits estimés consommés",
            "minimum": 0,
            "example": 8
          },
          "user_group": {
            "type": "string",
            "description": "Catégorie de groupe d'utilisateurs",
            "example": "default"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "integer",
                "description": "Code d'erreur de statut HTTP"
              },
              "message": {
                "type": "string",
                "description": "Message de description de l'erreur",
                "example": "Paramètres de requête invalides"
              },
              "type": {
                "type": "string",
                "description": "Type d'erreur",
                "example": "invalid_request_error"
              },
              "param": {
                "type": "string",
                "description": "Nom du paramètre concerné",
                "example": "model"
              },
              "fallback_suggestion": {
                "type": "string",
                "description": "Suggestion lorsqu'une erreur se produit",
                "example": "seedance-2.0"
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "##Toutes les API nécessitent une authentification Bearer Token##\n\n**Obtenir une clé API :**\n\nVisitez la [Page de gestion des clés API](https://evolink.ai/dashboard/keys) pour obtenir votre clé API\n\n**Ajouter à l'en-tête de requête :**\n```\nAuthorization: Bearer YOUR_API_KEY\n```"
      }
    }
  },
  "tags": [
    {
      "name": "Génération vidéo",
      "description": "APIs liées à la génération vidéo par IA"
    }
  ]
}
