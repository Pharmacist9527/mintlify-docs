{
  "openapi": "3.1.0",
  "info": {
    "title": "API de génération de vidéo humaine numérique OmniHuman-1.5",
    "description": "Créer des tâches de génération vidéo d'humain numérique pilotées par l'audio à l'aide du modèle OmniHuman-1.5",
    "license": {
      "name": "MIT"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://api.evolink.ai",
      "description": "Environnement de production"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/v1/videos/generations": {
      "post": {
        "summary": "Génération vidéo d'humain numérique OmniHuman-1.5",
        "description": "- Le modèle OmniHuman-1.5 (omnihuman-1.5) génère des vidéos d'humains numériques pilotées par audio\n- Mode de traitement asynchrone, utilisez l'ID de tâche retourné pour [interroger](/fr/api-manual/task-management/get-task-detail)\n- Les liens vidéo générés sont valides pendant 24 heures, veuillez les enregistrer rapidement\n\n**Remarque** :\n- Durée audio maximale : 35 secondes\n- Formats audio pris en charge : MP3, WAV\n- La facturation est basée sur la durée audio (arrondie à la seconde supérieure)",
        "operationId": "createOmniHumanVideoGeneration",
        "tags": [
          "Génération de vidéo d'humain numérique"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OmniHumanVideoGenerationRequest"
              },
              "examples": {
                "basic_generation": {
                  "summary": "Génération d'humain numérique de base",
                  "value": {
                    "model": "omnihuman-1.5",
                    "audio_url": "https://example.com/audio.mp3",
                    "image_urls": [
                      "https://example.com/person.jpg"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tâche de génération de vidéo d'humain numérique créée avec succès",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OmniHumanVideoGenerationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Paramètres de requête invalides",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "examples": {
                  "invalid_audio": {
                    "summary": "Format audio invalide",
                    "value": {
                      "error": {
                        "code": 400,
                        "message": "Invalid audio format or duration exceeds 35 seconds",
                        "type": "invalid_request_error",
                        "param": "audio_url",
                        "fallback_suggestion": "use MP3 or WAV format, max 35 seconds"
                      }
                    }
                  },
                  "no_subject": {
                    "summary": "Aucun sujet humain détecté",
                    "value": {
                      "error": {
                        "code": 400,
                        "message": "No human subject detected in image",
                        "type": "invalid_request_error",
                        "param": "image_urls",
                        "fallback_suggestion": "provide an image with a clear human figure"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Non autorisé, jeton invalide ou expiré",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 401,
                    "message": "Invalid or expired token",
                    "type": "authentication_error"
                  }
                }
              }
            }
          },
          "402": {
            "description": "Quota insuffisant, recharge requise",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 402,
                    "message": "Quota insuffisant",
                    "type": "insufficient_quota_error",
                    "fallback_suggestion": "https://evolink.ai/dashboard/billing"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Accès refusé",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 403,
                    "message": "Access denied for this model",
                    "type": "permission_error",
                    "param": "model"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Ressource introuvable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 404,
                    "message": "Specified model not found",
                    "type": "not_found_error",
                    "param": "model",
                    "fallback_suggestion": "omnihuman-1.5"
                  }
                }
              }
            }
          },
          "413": {
            "description": "Entité de requête trop volumineuse",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 413,
                    "message": "Image or audio file too large",
                    "type": "request_too_large_error",
                    "param": "image_urls",
                    "fallback_suggestion": "compress file to under 10MB"
                  }
                }
              }
            }
          },
          "429": {
            "description": "Limite de débit dépassée",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 429,
                    "message": "Limite de débit dépassée",
                    "type": "rate_limit_error",
                    "fallback_suggestion": "retry after 60 seconds"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erreur interne du serveur",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 500,
                    "message": "Erreur interne du serveur",
                    "type": "internal_server_error",
                    "fallback_suggestion": "try again later"
                  }
                }
              }
            }
          },
          "502": {
            "description": "Erreur du service en amont",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 502,
                    "message": "Upstream AI service unavailable",
                    "type": "upstream_error",
                    "fallback_suggestion": "try again later"
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service temporairement indisponible",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 503,
                    "message": "Service temporairement indisponible",
                    "type": "service_unavailable_error",
                    "fallback_suggestion": "retry after 30 seconds"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "OmniHumanVideoGenerationRequest": {
        "type": "object",
        "required": [
          "model",
          "audio_url",
          "image_urls"
        ],
        "properties": {
          "model": {
            "type": "string",
            "description": "Nom du modèle de génération de vidéo d'humain numérique",
            "enum": [
              "omnihuman-1.5"
            ],
            "default": "omnihuman-1.5",
            "example": "omnihuman-1.5"
          },
          "audio_url": {
            "type": "string",
            "format": "uri",
            "description": "URL audio pour piloter la synchronisation labiale et les mouvements corporels\n\n**Remarque :**\n- Durée audio maximale : `35` secondes\n- Formats pris en charge : `.mp3`, `.wav`\n- Les URL audio doivent être directement accessibles par le serveur\n- La facturation est basée sur la durée audio (arrondie à la seconde supérieure)",
            "example": "https://example.com/audio.mp3"
          },
          "image_urls": {
            "type": "array",
            "description": "Liste d'URLs d'images de référence contenant la personne à animer\n\n**Remarque** :\n- Nombre d'images : `1`\n- L'image doit contenir un sujet humain clair\n- Formats pris en charge : JPG, JPEG, PNG\n- Taille maximale : 10 MB",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "maxItems": 1,
            "example": [
              "https://example.com/person.jpg"
            ]
          },
          "prompt": {
            "type": "string",
            "description": "Invite textuelle optionnelle pour guider le style de génération, prend en charge uniquement le chinois, l'anglais, le japonais, le coréen, l'espagnol mexicain et l'indonésien",
            "example": "A person speaking naturally with subtle expressions"
          },
          "pe_fast_mode": {
            "type": "boolean",
            "description": "Activer le mode de traitement rapide\n\n**Remarque :**\n- `true` : Génération plus rapide avec une qualité potentiellement inférieure\n- `false` : Traitement de qualité standard (par défaut)",
            "default": false,
            "example": false
          },
          "mask_url": {
            "type": "array",
            "description": "Tableau d'URL de masque pour spécifier les régions d'animation\n\n**Remarque :**\n- Paramètre optionnel pour un contrôle avancé\n- Les images de masque doivent correspondre aux dimensions de l'image de référence",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "example": [
              "https://example.com/mask.png"
            ]
          },
          "seed": {
            "type": "integer",
            "description": "Graine aléatoire comme base pour déterminer l'état de diffusion initial, aléatoire par défaut. Si la graine est le même entier positif et que tous les autres paramètres sont cohérents, le contenu généré peut avoir des résultats cohérents"
          },
          "subject_check": {
            "type": "boolean",
            "description": "Activer la détection de sujet pour vérifier la présence humaine dans l'image\n\n**Remarque :**\n- `true` : Activer la détection de sujet, le temps d'initiation de la requête augmentera\n- `false` : Ignorer la détection de sujet (par défaut)",
            "default": false,
            "example": false
          },
          "auto_mask": {
            "type": "boolean",
            "description": "Activer la génération automatique de masque\n\n**Note :**\n- `true` : Détecte et masque automatiquement la silhouette humaine, le temps d'initiation de la requête augmentera. Ce paramètre est ignoré lorsque `mask_url` a une valeur\n- `false` : Utiliser le mask_url fourni ou aucun masque (par défaut)",
            "default": false,
            "example": false
          },
          "callback_url": {
            "type": "string",
            "description": "Adresse de rappel HTTPS après l'achèvement de la tâche\n\n**Moment du rappel :**\n- Déclenché lorsque la tâche est terminée, échouée ou annulée\n- Envoyé après confirmation de la facturation\n\n**Restrictions de sécurité :**\n- Seul le protocole HTTPS est pris en charge\n- Les rappels vers les adresses IP internes sont interdits (127.0.0.1, 10.x.x.x, 172.16-31.x.x, 192.168.x.x, etc.)\n- La longueur de l'URL ne doit pas dépasser `2048` caractères\n\n**Mécanisme de rappel :**\n- Délai d'expiration : `10` secondes\n- Maximum `3` tentatives en cas d'échec (tentatives après `1` seconde/`2` secondes/`4` secondes)\n- Le format du corps de réponse du rappel est cohérent avec le format de réponse de l'API de requête de tâche\n- Un code de statut 2xx renvoyé par l'adresse de rappel est considéré comme un succès, les autres codes de statut déclenchent une nouvelle tentative",
            "format": "uri",
            "example": "https://your-domain.com/webhooks/video-task-completed"
          }
        }
      },
      "OmniHumanVideoGenerationResponse": {
        "type": "object",
        "properties": {
          "created": {
            "type": "integer",
            "description": "Horodatage de création de la tâche",
            "example": 1757169743
          },
          "id": {
            "type": "string",
            "description": "ID de tâche",
            "example": "task-unified-1757169743-7cvnl5zw"
          },
          "model": {
            "type": "string",
            "description": "Nom du modèle réellement utilisé",
            "example": "omnihuman-1.5"
          },
          "object": {
            "type": "string",
            "enum": [
              "video.generation.task"
            ],
            "description": "Type de tâche spécifique"
          },
          "progress": {
            "type": "integer",
            "description": "Pourcentage de progression de la tâche (0-100)",
            "minimum": 0,
            "maximum": 100,
            "example": 0
          },
          "status": {
            "type": "string",
            "description": "Statut de la tâche",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ],
            "example": "pending"
          },
          "task_info": {
            "$ref": "#/components/schemas/VideoTaskInfo",
            "description": "Informations détaillées de la tâche vidéo"
          },
          "type": {
            "type": "string",
            "enum": [
              "text",
              "image",
              "audio",
              "video"
            ],
            "description": "Type de sortie de la tâche",
            "example": "video"
          },
          "usage": {
            "$ref": "#/components/schemas/VideoUsage",
            "description": "Informations d'utilisation et de facturation"
          }
        }
      },
      "VideoTaskInfo": {
        "type": "object",
        "properties": {
          "can_cancel": {
            "type": "boolean",
            "description": "Indique si la tâche peut être annulée (toujours false pour OmniHuman)",
            "example": false
          },
          "estimated_time": {
            "type": "integer",
            "description": "Temps d'achèvement estimé (secondes)",
            "minimum": 0,
            "example": 120
          },
          "video_duration": {
            "type": "integer",
            "description": "Durée de la vidéo (secondes), basée sur la durée de l'audio",
            "example": 10
          }
        }
      },
      "VideoUsage": {
        "type": "object",
        "description": "Informations d'utilisation et de facturation",
        "properties": {
          "billing_rule": {
            "type": "string",
            "description": "Règle de facturation (per_second pour OmniHuman)",
            "enum": [
              "per_call",
              "per_token",
              "per_second"
            ],
            "example": "per_second"
          },
          "credits_reserved": {
            "type": "number",
            "description": "Crédits estimés consommés (basés sur la durée de l'audio)",
            "minimum": 0,
            "example": 10
          },
          "user_group": {
            "type": "string",
            "description": "Catégorie de groupe d'utilisateurs",
            "example": "default"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "integer",
                "description": "Code d'erreur de statut HTTP"
              },
              "message": {
                "type": "string",
                "description": "Description de l'erreur",
                "example": "Paramètres de requête invalides"
              },
              "type": {
                "type": "string",
                "description": "Type d'erreur",
                "example": "invalid_request_error"
              },
              "param": {
                "type": "string",
                "description": "Nom du paramètre concerné",
                "example": "model"
              },
              "fallback_suggestion": {
                "type": "string",
                "description": "Suggestion pour la résolution d'erreur",
                "example": "omnihuman-1.5"
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "##Toutes les API nécessitent une authentification Bearer Token##\n\n**Obtenir une clé API :**\n\nVisitez la [Page de gestion des clés API](https://evolink.ai/dashboard/keys) pour obtenir votre clé API\n\n**Ajouter à l'en-tête de requête :**\n```\nAuthorization: Bearer YOUR_API_KEY\n```"
      }
    }
  },
  "tags": [
    {
      "name": "Génération de vidéo d'humain numérique",
      "description": "APIs de génération vidéo d'humain numérique OmniHuman-1.5"
    }
  ]
}