{
  "openapi": "3.1.0",
  "info": {
    "title": "Interface wan2.5-image-to-video",
    "description": "Utilisez le modèle WAN2.5 pour la génération image-vers-vidéo, prenant en charge une configuration simplifiée des paramètres du modèle",
    "license": {
      "name": "MIT"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://api.evolink.ai",
      "description": "Environnement de production"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/v1/videos/generations": {
      "post": {
        "summary": "Interface wan2.5-image-to-video",
        "description": "- WAN2.5 (wan2.5-image-to-video) prend en charge le mode image de première image vers vidéo\n- Mode de traitement asynchrone, utilisez l'ID de tâche retourné pour [interroger](/fr/api-manual/task-management/get-task-detail)\n- Les liens vidéo générés sont valides pendant 24 heures, veuillez les enregistrer rapidement",
        "operationId": "createWan25ImageToVideoGeneration",
        "tags": [
          "Génération vidéo"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Wan25ImageToVideoRequest"
              },
              "examples": {
                "image_to_video": {
                  "summary": "Image vers vidéo",
                  "value": {
                    "model": "wan2.5-image-to-video",
                    "prompt": "A cat playing piano"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tâche vidéo créée avec succès",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VideoGenerationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Paramètres de requête invalides",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 400,
                    "message": "Invalid request format",
                    "type": "invalid_request_error",
                    "param": "model"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Échec de l'authentification",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 401,
                    "message": "Invalid authentication credentials",
                    "type": "authentication_error"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Accès refusé",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 403,
                    "message": "Access denied for this model",
                    "type": "permission_error",
                    "param": "model"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Ressource introuvable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 404,
                    "message": "Specified model not found",
                    "type": "not_found_error",
                    "param": "model",
                    "fallback_suggestion": "wan2.5-image-to-video"
                  }
                }
              }
            }
          },
          "429": {
            "description": "Limite de débit dépassée",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 429,
                    "message": "Limite de débit dépassée",
                    "type": "rate_limit_error",
                    "fallback_suggestion": "retry after 60 seconds"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erreur interne du serveur",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 500,
                    "message": "Erreur interne du serveur",
                    "type": "internal_server_error",
                    "fallback_suggestion": "try again later"
                  }
                }
              }
            }
          },
          "502": {
            "description": "Erreur du service en amont",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 502,
                    "message": "Bad gateway",
                    "type": "upstream_error",
                    "fallback_suggestion": "try again later"
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service temporairement indisponible",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 503,
                    "message": "Service temporairement indisponible",
                    "type": "service_unavailable_error",
                    "fallback_suggestion": "retry after 30 seconds"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Wan25ImageToVideoRequest": {
        "type": "object",
        "required": [
          "model",
          "prompt",
          "image_urls"
        ],
        "properties": {
          "model": {
            "type": "string",
            "description": "Nom du modèle",
            "enum": [
              "wan2.5-image-to-video"
            ],
            "default": "wan2.5-image-to-video",
            "example": "wan2.5-image-to-video"
          },
          "prompt": {
            "type": "string",
            "description": "Invite décrivant quel type de vidéo générer, limitée à 2000 tokens",
            "example": "A cat playing the piano",
            "maxLength": 2000
          },
          "duration": {
            "type": "integer",
            "description": "Spécifie la durée de la vidéo générée (secondes)\n\n**Remarque :**\n- Prend en charge uniquement les valeurs `5` et `10`, représentant respectivement `5 secondes` et `10 secondes`\n- Une seule requête sera pré-facturée en fonction de la valeur de `duration`, avec des frais réels basés sur la durée de la vidéo générée en secondes",
            "example": 5
          },
          "quality": {
            "type": "string",
            "description": "Qualité vidéo, par défaut `720p`\n\n**Description :**\n- `480p` : Qualité inférieure, prix inférieur\n- `720p` : Qualité standard, prix standard, c'est la valeur par défaut\n- `1080p` : Haute qualité, prix plus élevé",
            "default": "720p",
            "example": "720p"
          },
          "image_urls": {
            "type": "array",
            "description": "Liste d'URLs d'images de référence pour la fonctionnalité image-vers-vidéo de première image\n\n**Remarque :**\n- Une seule requête prend en charge la quantité d'images d'entrée : `1` image\n- Taille de l'image : pas plus de `10MB`\n- Formats d'image pris en charge : `.jpeg`, `.jpg`, `.png` (canaux transparents non pris en charge), `.bmp`, `.webp`\n- Résolution de l'image : la plage de largeur et de hauteur de l'image est de `[360, 2000]` pixels\n- Les URLs d'images doivent être directement visibles par le serveur, ou l'URL de l'image doit déclencher un téléchargement direct lors de l'accès (généralement ces URLs se terminent par des extensions de fichiers image, telles que `.png`, `.jpg`)",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "maxItems": 1,
            "example": [
              "https://example.com/image1.png"
            ]
          },
          "prompt_extend": {
            "type": "boolean",
            "description": "S'il faut activer la réécriture intelligente du prompt. Lorsqu'activé, un grand modèle de langage optimisera le prompt. Ceci est particulièrement efficace pour les prompts qui manquent de détails ou sont trop simples. La valeur par défaut est `true`",
            "default": true,
            "example": true
          },
          "callback_url": {
            "type": "string",
            "description": "Adresse de rappel HTTPS après l'achèvement de la tâche\n\n**Moment du rappel :**\n- Déclenché lorsque la tâche est terminée, échouée ou annulée\n- Envoyé après confirmation de la facturation\n\n**Restrictions de sécurité :**\n- Seul le protocole HTTPS est pris en charge\n- Les rappels vers les adresses IP internes sont interdits (127.0.0.1, 10.x.x.x, 172.16-31.x.x, 192.168.x.x, etc.)\n- La longueur de l'URL ne doit pas dépasser `2048` caractères\n\n**Mécanisme de rappel :**\n- Délai d'expiration : `10` secondes\n- Maximum `3` tentatives en cas d'échec (tentatives après `1` seconde/`2` secondes/`4` secondes)\n- Le format du corps de réponse du rappel est cohérent avec le format de réponse de l'API de requête de tâche\n- Un code de statut 2xx renvoyé par l'adresse de rappel est considéré comme un succès, les autres codes de statut déclenchent une nouvelle tentative",
            "format": "uri",
            "example": "https://your-domain.com/webhooks/video-task-completed"
          }
        }
      },
      "VideoGenerationResponse": {
        "type": "object",
        "properties": {
          "created": {
            "type": "integer",
            "description": "Horodatage de création de la tâche",
            "example": 1757169743
          },
          "id": {
            "type": "string",
            "description": "ID de tâche",
            "example": "task-unified-1757169743-7cvnl5zw"
          },
          "model": {
            "type": "string",
            "description": "Nom du modèle réellement utilisé",
            "example": "wan2.5-image-to-video"
          },
          "object": {
            "type": "string",
            "enum": [
              "video.generation.task"
            ],
            "description": "Type de tâche spécifique"
          },
          "progress": {
            "type": "integer",
            "description": "Pourcentage de progression de la tâche (0-100)",
            "minimum": 0,
            "maximum": 100,
            "example": 0
          },
          "status": {
            "type": "string",
            "description": "Statut de la tâche",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ],
            "example": "pending"
          },
          "task_info": {
            "$ref": "#/components/schemas/VideoTaskInfo",
            "description": "Informations détaillées de la tâche vidéo"
          },
          "type": {
            "type": "string",
            "enum": [
              "text",
              "image",
              "audio",
              "video"
            ],
            "description": "Type de sortie de la tâche",
            "example": "video"
          },
          "usage": {
            "$ref": "#/components/schemas/Usage",
            "description": "Informations d'utilisation et de facturation"
          }
        }
      },
      "VideoTaskInfo": {
        "type": "object",
        "properties": {
          "can_cancel": {
            "type": "boolean",
            "description": "Si la tâche peut être annulée",
            "example": true
          },
          "estimated_time": {
            "type": "integer",
            "description": "Temps d'achèvement estimé (secondes)",
            "minimum": 0,
            "example": 120
          }
        }
      },
      "Usage": {
        "type": "object",
        "description": "Informations d'utilisation et de facturation",
        "properties": {
          "billing_rule": {
            "type": "string",
            "description": "Règle de facturation",
            "enum": [
              "per_call",
              "per_token",
              "per_second"
            ],
            "example": "per_call"
          },
          "credits_reserved": {
            "type": "number",
            "description": "Crédits estimés consommés",
            "minimum": 0,
            "example": 5
          },
          "user_group": {
            "type": "string",
            "description": "Catégorie de groupe d'utilisateurs",
            "enum": [
              "default",
              "vip"
            ],
            "example": "default"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "integer",
                "description": "Code d'erreur"
              },
              "message": {
                "type": "string",
                "description": "Message d'erreur"
              },
              "type": {
                "type": "string",
                "description": "Type d'erreur"
              },
              "param": {
                "type": "string",
                "description": "Nom du paramètre qui a causé l'erreur"
              },
              "fallback_suggestion": {
                "type": "string",
                "description": "Solution suggérée"
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "##Toutes les API nécessitent une authentification Bearer Token##\n\n**Obtenir une clé API :**\n\nVisitez la [Page de gestion des clés API](https://evolink.ai/dashboard/keys) pour obtenir votre clé API\n\n**Ajouter à l'en-tête de requête :**\n```\nAuthorization: Bearer YOUR_API_KEY\n```"
      }
    }
  }
}