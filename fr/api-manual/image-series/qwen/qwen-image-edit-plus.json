{
  "openapi": "3.1.0",
  "info": {
    "title": "Interface qwen-image-edit-plus",
    "description": "Utilisez le modèle Qwen pour l'édition d'images avec une configuration simplifiée des paramètres du modèle",
    "license": {
      "name": "MIT"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://api.evolink.ai",
      "description": "Environnement de production"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "paths": {
    "/v1/images/generations": {
      "post": {
        "summary": "Interface qwen-image-edit-plus",
        "description": "- Le modèle Qwen (qwen-image-edit-plus) prend en charge l'édition d'image, image-vers-image et autres modes\n- Mode de traitement asynchrone, utilisez l'ID de tâche retourné pour [interroger](/fr/api-manual/task-management/get-task-detail)\n- Les liens d'image générés sont valides pendant 24 heures, veuillez les enregistrer rapidement",
        "operationId": "createQwenImageEditPlusGeneration",
        "tags": [
          "Génération d'image"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QwenImageEditRequest"
              },
              "examples": {
                "image_edit": {
                  "summary": "Édition d'image",
                  "value": {
                    "model": "qwen-image-edit-plus",
                    "prompt": "Replace the background of this image"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tâche d'image créée avec succès",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageGenerationResponse"
                }
              }
            }
          },
          "400": {
            "description": "Paramètres de requête invalides",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 400,
                    "message": "Invalid request format",
                    "type": "invalid_request_error",
                    "param": "model"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Échec de l'authentification",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 401,
                    "message": "Invalid authentication credentials",
                    "type": "authentication_error"
                  }
                }
              }
            }
          },
          "403": {
            "description": "Accès refusé",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 403,
                    "message": "Access denied for this model",
                    "type": "permission_error",
                    "param": "model"
                  }
                }
              }
            }
          },
          "404": {
            "description": "Ressource introuvable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 404,
                    "message": "Specified model not found",
                    "type": "not_found_error",
                    "param": "model",
                    "fallback_suggestion": "qwen-image-edit-plus"
                  }
                }
              }
            }
          },
          "429": {
            "description": "Limite de débit dépassée",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 429,
                    "message": "Limite de débit dépassée",
                    "type": "rate_limit_error",
                    "fallback_suggestion": "retry after 60 seconds"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Erreur interne du serveur",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 500,
                    "message": "Erreur interne du serveur",
                    "type": "internal_server_error",
                    "fallback_suggestion": "try again later"
                  }
                }
              }
            }
          },
          "502": {
            "description": "Erreur du service en amont",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 502,
                    "message": "Bad gateway",
                    "type": "upstream_error",
                    "fallback_suggestion": "try again later"
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service temporairement indisponible",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                },
                "example": {
                  "error": {
                    "code": 503,
                    "message": "Service temporairement indisponible",
                    "type": "service_unavailable_error",
                    "fallback_suggestion": "retry after 30 seconds"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "QwenImageEditRequest": {
        "type": "object",
        "required": [
          "model",
          "prompt",
          "image_urls"
        ],
        "properties": {
          "model": {
            "type": "string",
            "description": "Nom du modèle",
            "enum": [
              "qwen-image-edit-plus"
            ],
            "default": "qwen-image-edit-plus",
            "example": "qwen-image-edit-plus"
          },
          "prompt": {
            "type": "string",
            "description": "Invite décrivant l'image à générer ou comment éditer l'image d'entrée, limitée à 2000 tokens",
            "example": "Replace the background of this image",
            "maxLength": 2000
          },
          "image_urls": {
            "type": "array",
            "description": "Liste d'URLs d'images de référence\n\n**Remarque :**\n- Nombre maximum d'images d'entrée par requête : `3` images\n- La largeur et la hauteur de l'image doivent être dans la plage de `[384-3072]` pixels\n- Formats de fichiers pris en charge : `.jpg`, `.jpeg`, `.png`, `.bmp`, `.webp`, `.tiff`\n- Les URLs d'images doivent être directement accessibles par le serveur, ou l'URL de l'image doit télécharger directement lors de l'accès (généralement ces URLs se terminent par des extensions de fichiers image, telles que `.png`, `.jpg`)",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "example": [
              "https://example.com/image1.png",
              "https://example.com/image2.png"
            ]
          },
          "n": {
            "type": "integer",
            "description": "Spécifie le nombre d'images à générer, prend en charge toute valeur entière entre `[1,6]`\n\n**Remarque :**\n- Chaque requête sera pré-facturée en fonction de la valeur de `n`, les frais réels sont basés sur le nombre d'images générées",
            "minimum": 1,
            "maximum": 6,
            "default": 1,
            "example": 1
          },
          "negative_prompt": {
            "type": "string",
            "description": "Prompt négatif pour décrire le contenu que vous ne voulez pas voir dans l'image, utilisé pour contraindre la sortie\n\n**Remarque :**\n- Prend en charge le chinois et l'anglais, longueur maximale de `500` caractères, chaque caractère chinois/lettre compte comme un caractère, l'excédent sera automatiquement tronqué",
            "maxLength": 500,
            "example": "low resolution, error, worst quality, low quality, mutilated, extra fingers, bad proportions"
          },
          "size": {
            "type": "string",
            "description": "Taille de l'image générée, prend en charge le **format pixel**:\n- Largeur x Hauteur, par exemple: `1024x1024`, `1024x1536`, `1536x1024` et autres valeurs dans la plage\n- Plage de largeur et hauteur: `[512, 2048]` pixels\n- Si non défini, l'image de sortie conservera un rapport d'aspect similaire à l'image d'origine, proche de la résolution `1024x1024`\n\n**Remarque:**\n- Ce paramètre n'est disponible que lorsque le nombre d'images de sortie `n` est `1`, sinon une erreur sera retournée",
            "pattern": "^[0-9]+x[0-9]+$",
            "example": "1024x1024"
          },
          "prompt_extend": {
            "type": "boolean",
            "description": "S'il faut activer la réécriture intelligente du prompt. Lorsqu'activé, utilise un grand modèle pour optimiser le prompt positif, améliorant considérablement les résultats pour les prompts simples ou insuffisamment descriptifs. La valeur par défaut est `true`",
            "default": true,
            "example": true
          },
          "watermark": {
            "type": "boolean",
            "description": "S'il faut ajouter le filigrane \"Qwen-Image\" dans le coin inférieur droit de l'image. La valeur par défaut est `false`",
            "default": false,
            "example": false
          },
          "seed": {
            "type": "integer",
            "description": "Graine aléatoire, plage `[0, 2147483647]`, l'utilisation de la même valeur de graine peut maintenir le contenu généré relativement stable\n\n**Remarque :**\n- Si non fournie, l'algorithme utilisera automatiquement une graine aléatoire\n- Le processus de génération du modèle est probabiliste, même avec la même graine, les résultats ne peuvent pas être garantis complètement identiques à chaque fois",
            "minimum": 0,
            "maximum": 2147483647,
            "example": 12345
          },
          "callback_url": {
            "type": "string",
            "description": "Adresse de rappel HTTPS après l'achèvement de la tâche\n\n**Moment du rappel :**\n- Déclenché lorsque la tâche est terminée, échouée ou annulée\n- Envoyé après confirmation de la facturation\n\n**Restrictions de sécurité :**\n- Seul le protocole HTTPS est pris en charge\n- Les rappels vers les adresses IP internes sont interdits (127.0.0.1, 10.x.x.x, 172.16-31.x.x, 192.168.x.x, etc.)\n- La longueur de l'URL ne doit pas dépasser `2048` caractères\n\n**Mécanisme de rappel :**\n- Délai d'expiration : `10` secondes\n- Maximum `3` tentatives en cas d'échec (tentatives après `1` seconde/`2` secondes/`4` secondes)\n- Le format du corps de réponse du rappel est cohérent avec le format de réponse de l'API de requête de tâche\n- Un code de statut 2xx renvoyé par l'adresse de rappel est considéré comme un succès, les autres codes de statut déclenchent une nouvelle tentative",
            "format": "uri",
            "example": "https://your-domain.com/webhooks/image-task-completed"
          }
        }
      },
      "ImageGenerationResponse": {
        "type": "object",
        "properties": {
          "created": {
            "type": "integer",
            "description": "Horodatage de création de la tâche",
            "example": 1757156493
          },
          "id": {
            "type": "string",
            "description": "ID de tâche",
            "example": "task-unified-1757156493-imcg5zqt"
          },
          "model": {
            "type": "string",
            "description": "Nom du modèle réellement utilisé",
            "example": "qwen-image-edit-plus"
          },
          "object": {
            "type": "string",
            "enum": [
              "image.generation.task"
            ],
            "description": "Type de tâche spécifique"
          },
          "progress": {
            "type": "integer",
            "description": "Pourcentage de progression de la tâche (0-100)",
            "minimum": 0,
            "maximum": 100,
            "example": 0
          },
          "status": {
            "type": "string",
            "description": "Statut de la tâche",
            "enum": [
              "pending",
              "processing",
              "completed",
              "failed"
            ],
            "example": "pending"
          },
          "task_info": {
            "$ref": "#/components/schemas/TaskInfo",
            "description": "Informations sur la tâche asynchrone"
          },
          "type": {
            "type": "string",
            "enum": [
              "text",
              "image",
              "audio",
              "video"
            ],
            "description": "Type de sortie de la tâche",
            "example": "image"
          },
          "usage": {
            "$ref": "#/components/schemas/Usage",
            "description": "Informations d'utilisation et de facturation"
          }
        }
      },
      "TaskInfo": {
        "type": "object",
        "properties": {
          "can_cancel": {
            "type": "boolean",
            "description": "Si la tâche peut être annulée",
            "example": true
          },
          "estimated_time": {
            "type": "integer",
            "description": "Temps d'achèvement estimé (secondes)",
            "minimum": 0,
            "example": 30
          }
        }
      },
      "Usage": {
        "type": "object",
        "description": "Informations d'utilisation et de facturation",
        "properties": {
          "billing_rule": {
            "type": "string",
            "description": "Règle de facturation",
            "enum": [
              "per_call",
              "per_token",
              "per_second"
            ],
            "example": "per_call"
          },
          "credits_reserved": {
            "type": "number",
            "description": "Crédits estimés consommés",
            "minimum": 0,
            "example": 1.0
          },
          "user_group": {
            "type": "string",
            "description": "Catégorie de groupe d'utilisateurs",
            "enum": [
              "default",
              "vip"
            ],
            "example": "default"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "error": {
            "type": "object",
            "properties": {
              "code": {
                "type": "integer",
                "description": "Code d'erreur"
              },
              "message": {
                "type": "string",
                "description": "Message d'erreur"
              },
              "type": {
                "type": "string",
                "description": "Type d'erreur"
              },
              "param": {
                "type": "string",
                "description": "Nom du paramètre qui a causé l'erreur"
              },
              "fallback_suggestion": {
                "type": "string",
                "description": "Solution suggérée"
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "##Toutes les API nécessitent une authentification Bearer Token##\n\n**Obtenir une clé API :**\n\nVisitez la [Page de gestion des clés API](https://evolink.ai/dashboard/keys) pour obtenir votre clé API\n\n**Ajouter à l'en-tête de requête :**\n```\nAuthorization: Bearer YOUR_API_KEY\n```"
      }
    }
  },
  "tags": [
    {
      "name": "Génération d'image",
      "description": "APIs liées à la génération d'images IA"
    }
  ]
}