---
title: "OpenClaw + Feishu"
description: "Conectar OpenClaw a EvoLink.AI a través de Feishu (Lark)"
---

## Descripción general

OpenClaw es un Gateway de agentes de IA de código abierto que actúa como puente entre aplicaciones de chat y agentes de IA. A través de un proceso de Gateway centralizado, conecta plataformas de chat como Telegram, WhatsApp, Discord y Feishu (Lark) con agentes de programación de IA, permitiendo interacciones directas de programación con IA dentro de las ventanas de chat.

Al configurar **EvoLink API** como proveedor de modelos personalizado en OpenClaw y conectar un **Bot de Feishu**, puedes usar los modelos Claude de EvoLink (como **Claude 4.6 Opus**, **Claude 4.5 Sonnet**, **Claude 4.5 Haiku**) para conversaciones de programación asistida por IA directamente en Feishu.

El canal de Feishu utiliza el modo de **conexión larga WebSocket** para recibir mensajes — no se requiere una URL pública.

**Esta guía cubre:**
- Instalación y configuración del Gateway OpenClaw
- Creación de una aplicación empresarial de Feishu con capacidad de bot
- Configuración de EvoLink API como proveedor de modelos personalizado
- Verificación de la conexión y primeros pasos

## Requisitos previos

Antes de configurar, asegúrate de tener:

### 1. Instalar Node.js

OpenClaw se instala a través de npm. Primero necesitas instalar [Node.js](https://nodejs.org/es/download).

### 2. Obtener la clave API de EvoLink

- Inicia sesión en el [Panel de EvoLink](https://evolink.ai/dashboard)
- Busca API Keys en el panel, haz clic en el botón 'Crear nueva clave' y luego copia la clave generada
- La clave API generalmente comienza con `sk-`

### 3. Preparar una cuenta de Feishu

Necesitas una cuenta empresarial de Feishu para crear aplicaciones en la Plataforma Abierta de Feishu.

## Paso 1: Instalar OpenClaw

Ejecuta el siguiente comando en tu terminal:

```bash
npm install -g openclaw@latest
```

Instala el plugin de Feishu:

```bash
openclaw plugins install @openclaw/feishu
```

## Paso 2: Configuración inicial

Ejecuta el comando de configuración inicial. OpenClaw te guiará a través de la configuración inicial e instalará el servicio daemon en segundo plano:

```bash
openclaw onboard --install-daemon
```

### 1. Confirmar instalación

El sistema mostrará un aviso de riesgos. Confirma para continuar:

![Confirm Installation](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011629_241.png)

### 2. Seleccionar modo de instalación

Cuando se te pida elegir un modo de instalación, selecciona **Quickstart**:

![Select Quickstart](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011705_241.png)

### 3. Seleccionar proveedor

Cuando se te pida elegir un proveedor de modelos, selecciona **Skip**. Configuraremos manualmente EvoLink como proveedor personalizado más adelante:

![Skip Provider Selection](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011742_033.png)

### 4. Seleccionar modelos

Cuando se te pida elegir qué modelos habilitar, selecciona **All**:

![Select All Models](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011808_857.png)

### 5. Seleccionar modelo predeterminado

Cuando se te pida elegir un modelo predeterminado, selecciona **Keep current**:

![Keep Current Model](/images/OpenClaw-Telegram/ScreenShot_2026-02-08_011825_375.png)

## Paso 3: Crear aplicación de Feishu

### 1. Iniciar sesión en la Plataforma Abierta de Feishu

Visita la [Plataforma Abierta de Feishu](https://open.feishu.cn/app) e inicia sesión con tu cuenta de Feishu.

<Note>
Para Lark (versión internacional), usa [https://open.larksuite.com/app](https://open.larksuite.com/app) y establece `domain: "lark"` en la configuración.
</Note>

### 2. Crear aplicación

Haz clic en **Create Enterprise Self-Built Application**, completa el nombre y la descripción de la aplicación, y elige un icono.

![Create Application](/images/OpenClaw-Feishu/create-app.avif)

### 3. Obtener credenciales

En la página de **Credentials & Basic Info**, copia:

- **App ID** (formato: `cli_xxx`)
- **App Secret**

<Warning>
Mantén tu App Secret seguro. No lo compartas con otros.
</Warning>

![Get Credentials](/images/OpenClaw-Feishu/get-credentials.avif)

### 4. Configurar permisos

En la página de **Permission Management**, haz clic en **Batch Import** y pega el siguiente JSON para importar todos los permisos necesarios:

```json
{
  "scopes": {
    "tenant": [
      "aily:file:read",
      "aily:file:write",
      "application:application.app_message_stats.overview:readonly",
      "application:application:self_manage",
      "application:bot.menu:write",
      "cardkit:card:write",
      "contact:contact.base:readonly",
      "contact:user.employee_id:readonly",
      "corehr:file:download",
      "docs:document.content:read",
      "event:ip_list",
      "im:chat",
      "im:chat.access_event.bot_p2p_chat:read",
      "im:chat.members:bot_access",
      "im:message",
      "im:message.group_at_msg:readonly",
      "im:message.group_msg",
      "im:message.p2p_msg:readonly",
      "im:message:readonly",
      "im:message:send_as_bot",
      "im:resource",
      "sheets:spreadsheet",
      "wiki:wiki:readonly"
    ],
    "user": [
      "aily:file:read",
      "aily:file:write",
      "im:chat.access_event.bot_p2p_chat:read"
    ]
  }
}
```

![Configure Permissions](/images/OpenClaw-Feishu/configure-permissions.avif)

### 5. Habilitar capacidad de bot

En la barra lateral izquierda, haz clic en **App Capabilities**, busca la tarjeta **Bot** y activa el **menu status**. Una vez habilitado, completa el nombre y la descripción del bot — los usuarios verán estos datos al buscar o chatear con el bot en Feishu.

![Enable Bot Capability](/images/OpenClaw-Feishu/enable-bot.png)

### 6. Configurar suscripciones de eventos

<Warning>
Antes de configurar las suscripciones de eventos, asegúrate de haber:
- Completado la configuración del canal de Feishu (ver Paso 4)
- El gateway está en ejecución (verifica con `openclaw gateway status`)
</Warning>

En la página de **Event Subscriptions**:

1. Selecciona **Use Long Connection to Receive Events** (modo WebSocket)
2. Agrega el evento: `im.message.receive_v1` (Recibir mensaje)

<Warning>
Si el gateway no está en ejecución o el canal no ha sido agregado, la configuración de conexión larga no se podrá guardar.
</Warning>

![Configure Event Subscriptions](/images/OpenClaw-Feishu/event-subscription.avif)

### 7. Publicar aplicación

Ve a **Version Management & Release**, crea una versión, envíala para revisión y publícala. Las aplicaciones empresariales auto-construidas generalmente se aprueban automáticamente.

## Paso 4: Configurar OpenClaw

La configuración de OpenClaw está centralizada en `~/.openclaw/openclaw.json`. Hay tres dominios de configuración clave:

- `plugins.entries.*` — Controla qué plugins cargar
- `channels.*` — Controla las conexiones de canales y credenciales de cuenta
- `models.providers.*` — Controla los proveedores de modelos

### 1. Agregar canal de Feishu

<Tabs>
  <Tab title="Configuración manual">
    Abre `~/.openclaw/openclaw.json`:

    Habilita el plugin de Feishu (`plugins.entries`):

    ```json
    "plugins": {
      "entries": {
        "feishu": {
          "enabled": true
        }
      }
    }
    ```

    Configura las credenciales del canal de Feishu (`channels.feishu`):

    ```json
    "channels": {
      "feishu": {
        "enabled": true,
        "dmPolicy": "pairing",
        "accounts": {
          "main": {
            "appId": "cli_xxx",
            "appSecret": "your-app-secret",
            "botName": "My AI Assistant"
          }
        }
      }
    }
    ```

    <Warning>
    Las credenciales de Feishu deben colocarse bajo `channels.feishu.accounts`, NO bajo `plugins.entries.feishu`. Colocarlas en la ubicación incorrecta causará un error `Unrecognized key`.
    </Warning>

    También puedes configurar mediante variables de entorno:

    ```bash
    export FEISHU_APP_ID="cli_xxx"
    export FEISHU_APP_SECRET="xxx"
    ```
  </Tab>
  <Tab title="Comando CLI">
    Ejecuta el siguiente comando, selecciona Feishu e ingresa tu App ID y App Secret cuando se te solicite:

    ```bash
    openclaw channels add
    ```

    <Warning>
    Las versiones más recientes de OpenClaw pueden tener conflictos de configuración con este comando. Se recomienda la configuración manual.
    </Warning>
  </Tab>
</Tabs>

### 2. Configurar EvoLink API

En el mismo `openclaw.json`, busca el campo `models` y agrega EvoLink como proveedor de modelos personalizado:

```json
"models": {
  "providers": {
    "anthropic": {
      "api": "anthropic-messages",
      "baseUrl": "https://code.evolink.ai",
      "apiKey": "your-evolink-api-key",
      "models": [
        {
          "id": "claude-opus-4-6",
          "name": "Claude Opus 4.6",
          "reasoning": false,
          "input": ["text"],
          "cost": {
            "input": 0,
            "output": 0,
            "cacheRead": 0,
            "cacheWrite": 0
          },
          "contextWindow": 200000,
          "maxTokens": 8192
        }
      ]
    }
  }
}
```

<Warning>
Reemplaza `"your-evolink-api-key"` con la clave API real de tu [Panel de EvoLink](https://evolink.ai/dashboard).
</Warning>

### 3. Configurar modelo predeterminado

En el campo `agents`, establece el modelo predeterminado:

```json
"model": {
  "primary": "anthropic/claude-opus-4-6"
}
```

### 4. Reiniciar el Gateway

Reinicia el Gateway de OpenClaw para aplicar la configuración:

```bash
openclaw gateway restart
```

<Warning>
Siempre usa `openclaw gateway restart` en lugar de iniciar manualmente otro proceso, de lo contrario obtendrás un error de conflicto de puertos.
</Warning>

Verifica que la configuración se haya cargado correctamente:

```bash
openclaw gateway status
```

## Paso 5: Verificar la conexión

### 1. Buscar el bot en Feishu

Abre Feishu, busca el nombre del bot que creaste e inicia una conversación.

### 2. Obtener código de emparejamiento

Envía cualquier mensaje al bot. Te devolverá un código de emparejamiento.

### 3. Completar el emparejamiento

Abre una nueva ventana de terminal y ejecuta:

```bash
openclaw pairing approve feishu <pairing-code>
```

<Warning>
Reemplaza `<pairing-code>` con el código real devuelto por el bot. Asegúrate de eliminar los corchetes angulares `<>`.
</Warning>

### 4. Probar la conexión

Después de completar el emparejamiento, envía un mensaje al bot en Feishu:

```
Hola, por favor preséntate
```

Si recibes una respuesta de IA, la integración está completa.

## Control de acceso

### Acceso por mensaje directo

Por defecto `dmPolicy: "pairing"` — los usuarios desconocidos recibirán un código de emparejamiento que debe ser aprobado por un administrador:

```bash
openclaw pairing list feishu        # Ver aprobaciones pendientes
openclaw pairing approve feishu <CODE>  # Aprobar
```

También puedes configurar una lista de permitidos de Open IDs de usuarios a través de `channels.feishu.allowFrom`.

### Acceso en grupos

La política de grupo se controla mediante `channels.feishu.groupPolicy`:

- `"open"` — Permitir a todos los usuarios del grupo (predeterminado)
- `"allowlist"` — Solo permitir usuarios en `groupAllowFrom`
- `"disabled"` — Deshabilitar mensajes de grupo

Por defecto, el bot solo responde cuando es @mencionado (`requireMention: true`).

## Comandos comunes

| Comando | Descripción |
|---------|-------------|
| `openclaw gateway status` | Verificar el estado del gateway |
| `openclaw gateway restart` | Reiniciar el servicio del gateway |
| `openclaw logs --follow` | Ver registros en tiempo real |
| `openclaw pairing list feishu` | Ver solicitudes de emparejamiento pendientes |
| `openclaw plugins list` | Ver plugins instalados |

## Solución de problemas

| Problema | Solución |
|----------|----------|
| El bot no responde en grupos | Verifica si @mencionaste al bot; comprueba si `groupPolicy` está en `"disabled"` |
| El bot no recibe mensajes | Verifica si la aplicación está publicada y aprobada; confirma que la suscripción de eventos `im.message.receive_v1` está configurada; confirma que el modo de conexión larga WebSocket está seleccionado |
| App Secret filtrado | Restablece el App Secret en la Plataforma Abierta de Feishu, actualiza la configuración, reinicia el gateway |
| Error al enviar mensajes | Verifica si el permiso `im:message:send_as_bot` está otorgado; revisa los registros con `openclaw logs --follow` |
