---
title: "Codex CLI"
description: "Codex CLI を EvoLink.AI に接続する"
---

## 概要

![Codex CLI インターフェース](/images/integration-guide/codex-interface.png)

Codex CLI は、ターミナルでコード関連タスクを行うための OpenAI 公式コマンドラインツールです。一般的なチャットツールと比較して、より明確で実用的なコード変更を重視したエンジニアリング向けの出力が特徴です。
Codex CLI を **EvoLink API** と統合することで、1つのキーと1つのベースURLで、OpenAI 互換インターフェースを通じて EvoLink のモデル（**GPT シリーズ**など）にアクセスできます。

## 前提条件

設定を行う前に、以下を準備してください：

### 1. Node.js と npm のインストール

**なぜ必要？** Node.js は CLI ツールのランタイム環境です（スマートフォンに WeChat をインストールしてチャットするように、CLI ツールを実行するにはコンピュータに Node.js をインストールする必要があります）。

**既にインストール済みの場合：** `node -v` と `npm -v` を実行してバージョンを確認してください。v20 以上であれば、このステップはスキップできます。

**初めてインストールする場合：**
- [Node.js 公式サイト](https://nodejs.org/)からダウンロードしてインストール（LTS バージョン推奨）
- インストール手順に不慣れな場合は、[Runoob - Node.js インストールガイド](https://www.runoob.com/nodejs/nodejs-install-setup.html)を参照してください
- 推奨：**Node.js v20 以上**
- インストールの確認：

```bash
node -v
npm -v
```

![Node.js と npm のバージョン確認](/images/integration-guide/claude-node-npm-verify.png)

### 2. EvoLink API Key の取得

- [EvoLink ダッシュボード](https://evolink.ai/dashboard)にログイン
- ダッシュボードで API Keys を見つけ、「新しいキーを作成」ボタンをクリックし、生成されたキーをコピー
- API Key は通常 `sk-` で始まります

## ステップ 1：Codex CLI のインストール

<Note>
**ヒント：** コマンドラインターミナルの開き方がわからない場合は、[FAQ - コマンドラインターミナルの開き方](#13-コマンドラインターミナルの開き方)を参照してください
</Note>

### 1. グローバルインストール

```bash
npm install -g @openai/codex
```

**期待される結果：** ダウンロード情報がスクロールし、最後に `added XX packages` と表示されます（1〜3分かかります）。

**エラーが発生した場合：** `permission denied` の場合、Windows では「管理者として実行」した PowerShell が必要です。macOS/Linux ではコマンドの前に `sudo` を追加してください。

### 2. インストールの確認

```bash
codex --version
```

**成功の目安：** バージョン番号が表示されます（例：`1.x.x`）。

![Codex CLI バージョン](/images/integration-guide/codex-version.png)

## ステップ 2：EvoLink API の設定

Codex CLI は設定ファイルによるカスタム Provider をサポートしており、ソースコードの変更は不要です。

<Tabs>
  <Tab title="方法 1：GUI 操作">
    ### 1. 設定ディレクトリを開く

    <Tabs>
      <Tab title="Windows">
        `Win + R` を押し、以下を貼り付けて Enter を押すと、Codex の設定ディレクトリが開きます：
        ```
        %userprofile%\.codex
        ```
        ![Windows Win+R でターミナルを開く](/images/integration-guide/encodexwin-r.png)

      </Tab>
      <Tab title="macOS">
        Finder で `Command + Shift + G` を押し、以下のパスを貼り付けて Enter を押します：
        ```
        ~/.codex
        ```
      </Tab>
      <Tab title="Linux">
        ファイルマネージャーで設定ディレクトリにアクセスします：
        ```
        ~/.codex
        ```
      </Tab>
    </Tabs>
    ![Codex CLI 設定環境](/images/integration-guide/codex-config-env-en.png)
    ### 2. config.toml を編集

    設定ディレクトリ内の `config.toml` ファイルを見つけ、以下の内容で編集します：

    ```toml
    model = "gpt-5.2"
    model_reasoning_effort = "medium"
    model_provider = "evolink"

    [model_providers.evolink]
    name = "EvoLink API"
    base_url = "https://code.evolink.ai/v1"
    env_key = "OPENAI_API_KEY"
    wire_api = "responses"
    ```


    **⚠️ 重要：**
    - 記号を漏らさず**完全にコピー**してください
    - `"your-evolink-api-key"` を実際の API Key に置き換えてください
    - TOML フォーマットはインデントと記号に敏感です
  </Tab>

  <Tab title="方法 2：ワンコマンド作成">
    <Tabs>
      <Tab title="Windows PowerShell">
        ```powershell
@"
model = "gpt-5.2"
model_reasoning_effort = "medium"
model_provider = "evolink"

[model_providers.evolink]
name = "EvoLink API"
base_url = "https://code.evolink.ai/v1"
env_key = "OPENAI_API_KEY"
wire_api = "responses"
"@ | Out-File -FilePath "$env:USERPROFILE\.codex\config.toml" -Encoding utf8
        ```
    ![Codex ワンコマンド設定](/images/integration-guide/codex-one-command-config-win.png)
      </Tab>
      <Tab title="macOS / Linux">
        ```bash
cat > ~/.codex/config.toml << 'EOF'
model = "gpt-5.2"
model_reasoning_effort = "medium"
model_provider = "evolink"

[model_providers.evolink]
name = "EvoLink API"
base_url = "https://code.evolink.ai/v1"
env_key = "OPENAI_API_KEY"
wire_api = "responses"
EOF
        ```
      </Tab>
    </Tabs>

    コマンドを実行すると、設定ファイルが自動的に作成・書き込みされます。
  </Tab>
</Tabs>

```toml
model = "gpt-5.2"
model_reasoning_effort = "medium"
model_provider = "evolink"

[model_providers.evolink]
name = "EvoLink API"
base_url = "https://code.evolink.ai/v1"
env_key = "OPENAI_API_KEY"
wire_api = "responses"
```

設定フィールドの説明：
- `model`：デフォルトのモデル名
- `model_reasoning_effort`：推論の深さ（必要に応じて調整）
- `model_provider`：以下のセクションと一致するプロバイダー名
- `base_url`：EvoLink API エンドポイント
- `env_key`：API Key の環境変数名
- `wire_api`：`responses` に設定する必要があります

### 2. API Key の設定

<Tabs>
  <Tab title="Windows PowerShell">
    **一時的（現在のセッションのみ）**
    ```powershell
    $env:OPENAI_API_KEY = "your-evolink-api-key"
    ```

    **永続的**
    ```powershell
    [Environment]::SetEnvironmentVariable("OPENAI_API_KEY", "your-evolink-api-key", "User")
    ```
    変更を反映するにはターミナルを再起動してください。

    **設定の確認**
    ```powershell
    echo $env:OPENAI_API_KEY
    ```

    ![環境変数が正常に追加されたか確認](/images/integration-guide/codex-check-env.png)

    API Key が出力されれば、設定は成功です。
  </Tab>
  <Tab title="macOS / Linux">
    **一時的（現在のセッションのみ）**
    ```bash
    export OPENAI_API_KEY="your-evolink-api-key"
    ```

    **永続的**
    `~/.bashrc` または `~/.zshrc` を編集し、以下を追加します：
    ```bash
    export OPENAI_API_KEY="your-evolink-api-key"
    ```
    その後、`source ~/.bashrc` または `source ~/.zshrc` を実行して反映するか、ターミナルを再起動してください。

    **設定の確認**
    ```bash
    echo $OPENAI_API_KEY
    ```
    API Key が出力されれば、設定は成功です。
  </Tab>
</Tabs>

## ステップ 3：Codex CLI の使用開始

### 1. 作業ディレクトリに移動

```shell
cd your-working-directory
```

**注意：** `your-working-directory` を実際のパスに置き換えてください

### 2. インタラクティブモード

```shell
codex
```
![Codex CLI インターフェース](/images/integration-guide/codex-interface.png)
### 3. 設定の確認

```shell
codex "Who are you"
```

**成功の目安：**
- AI の応答テキストが表示される（数行）
- `401`、`403`、`API Key invalid` などのエラーが**表示されない**

**エラーが表示された場合：**
- `401 Unauthorized`：API Key が未設定または無効 → 環境変数を確認
- `403 Forbidden`：API Key の権限不足 → API Key を確認
- `Network error`：ネットワークの問題 → 接続を確認

## FAQ

### 1. Codex CLI とは何ですか？何に使いますか？
Codex CLI は、コード関連タスクに特化した OpenAI 公式コマンドラインツールです。より明確で実用的なコード変更を重視したエンジニアリング向けの出力が特徴です。

### 2. 初回使用時にインストールと設定を確認するには？
以下のコマンドを順番に実行してください：
- `node -v` と `npm -v`：Node.js と npm がインストールされていることを確認
- `codex --version`：Codex CLI がインストールされていることを確認
- `codex "Who are you"`：API 設定が正しいことを確認

### 3. インタラクティブモードとシングルコマンドモードの違いは？
- **インタラクティブモード**：`codex` を実行して連続会話に入り、複数ターンのやり取りが可能
- **シングルコマンドモード**：`codex "質問"` を実行して単一の応答を取得し終了

### 4. Codex CLI はローカルファイルやコードを自動的に読み取りまたはアップロードしますか？
いいえ。Codex CLI は、明示的に参照または許可した場合にのみファイル内容を読み取ります。専用のプロジェクトフォルダで使用することを推奨します。

### 5. Codex CLI でローカルファイルの内容を分析するには？
インタラクティブモードで、以下の方法でファイルを参照できます：
- ファイルパスを入力して Codex に読み取らせる
- ファイルをターミナルウィンドウにドラッグ＆ドロップ
- ファイル内容をコピー＆ペースト

### 6. Codex CLI は日本語の入出力に対応していますか？
はい、完全に対応しています。

### 7. 実行後に出力がない場合、原因は何ですか？
一般的な原因：
- ネットワーク接続の問題
- 無効な API Key または残高不足
- `base_url` の設定が正しくない
- ファイアウォールまたはプロキシがリクエストをブロックしている

### 8. 設定変更が反映されないのはなぜですか？
- ターミナルを再起動してください
- `config.toml` の構文を確認してください（TOML フォーマット）
- 設定ファイルのパスを確認してください：
  - Windows：`C:\Users\{username}\.codex\config.toml`
  - macOS / Linux：`~/.codex/config.toml`

### 9. 401/403 エラーの原因は？
- **401 エラー**：`OPENAI_API_KEY` が未設定または無効
- **403 エラー**：権限不足またはキーの有効期限切れ
- `env_key` が環境変数名と一致しているか確認してください

### 10. Codex CLI はどのようなシナリオに適していますか？
**適している用途：**
- コードの作成、デバッグ、リファクタリング
- コマンドライン環境での素早い Q&A
- ファイル内容の分析

**適していない用途：**
- 複雑な GUI インタラクション
- リアルタイム共同編集

### 11. モデルを切り替えるには？
設定ファイル `config.toml`（`~/.codex/config.toml` または `C:\Users\{username}\.codex\config.toml` にあります）を開き、`model` フィールドを変更します：

```toml
model = "gpt-5.2"  # 希望するモデル名に変更
```

ファイルを保存し、Codex CLI を再起動すると変更が反映されます。

### 12. 画像をアップロードするには？
- 方法 1：画像パスを参照する
- 方法 2：画像をターミナルにドラッグ＆ドロップする
- 方法 3：画像を直接ペーストする

すべての方法はユーザーの操作が必要です。Codex CLI はローカル画像を自動的に読み取りまたはアップロードしません。

### 13. コマンドラインターミナルの開き方

<Tabs>
  <Tab title="Windows">
    - 方法 1：`Win + R` を押し、`cmd` または `powershell` と入力して Enter を押す
    - 方法 2：スタートメニューで「コマンドプロンプト」または「PowerShell」を検索
    - 方法 3：フォルダ内で Shift を押しながら右クリックし、「PowerShell ウィンドウをここで開く」を選択
  </Tab>
  <Tab title="macOS">
    - 方法 1：`Command + Space` を押して Spotlight を開き、`Terminal` と入力して Enter を押す
    - 方法 2：「アプリケーション」→「ユーティリティ」→「ターミナル」を開く
  </Tab>
  <Tab title="Linux">
    - 方法 1：`Ctrl + Alt + T` ショートカットを押す
    - 方法 2：アプリケーションメニューで「Terminal」を検索
  </Tab>
</Tabs>

## 注意事項

<Warning>
Codex CLI は専用のプロジェクトフォルダで実行してください。機密性の高いディレクトリ（システムフォルダや認証情報を含むディレクトリなど）での実行は避けてください。Codex CLI は現在の作業ディレクトリを起点として動作します。
</Warning>

<Tip>
設定内の `wire_api` は `"responses"` に設定する必要があります。`"chat"` は非推奨です。
</Tip>
