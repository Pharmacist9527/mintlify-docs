---
title: "Codex CLI"
description: "将 Codex CLI 连接到 EvoLink.AI"
---

## 概述

![Codex CLI 界面](/images/integration-guide/image-6.png)

Codex CLI 是 OpenAI 官方推出的命令行工具，专注于在终端环境中完成代码相关任务。相比通用对话工具，Codex CLI 更强调“工程化输出”，能以更清晰的结构给出可直接落地的代码与修改建议。
通过将 Codex CLI 与 **EvoLink API** 进行配置集成，您可以在命令行中以统一的 OpenAI 兼容接口调用 EvoLink 提供的多种模型能力（如 **GPT 系列**），实现统一 Key、统一 Base URL 的多模型接入。

## 使用前准备

在开始配置之前，请确保已完成以下准备工作：

### 1. 安装 Node.js 与 npm

- 请从 [Node.js 官方网站](https://nodejs.org/) 下载并安装运行环境
- 建议使用 **Node.js v18 或更高版本**
- 安装完成后，可通过以下命令验证：

```bash
node -v
npm -v
```

### 2. 获取 EvoLink API Key

- 登录 [EvoLink 控制台](https://evolink.ai/dashboard)
- 创建并复制您的 API Key
- API Key 通常以 `sk-` 开头，请妥善保存

## 第一步：安装 Codex CLI

### 1. 全局安装

```bash
npm install -g @openai/codex
```

### 2. 检验安装

```bash
codex --version
```

![Codex CLI 版本](/images/integration-guide/image-4.png)

## 第二步：配置 EvoLink API

Codex CLI 支持通过配置文件设置自定义 Provider，无需修改源代码。

### 1. 找到配置文件目录

配置文件位于用户目录下：

```
C:\Users\{用户名}\.codex\config.toml
```

### 2. 修改配置文件

编辑 `config.toml` 文件，设置以下内容：

```toml
model = "gpt-5.2"
model_reasoning_effort = "medium"
model_provider = "evolink"

[model_providers.evolink]
name = "EvoLink API"
base_url = "https://api.evolink.ai/v1"
env_key = "OPENAI_API_KEY"
wire_api = "responses"
```

配置项说明：
- `model`：默认模型名称
- `model_reasoning_effort`：推理强度（按需调整）
- `model_provider`：绑定下方自定义 Provider 名称
- `base_url`：EvoLink API 接口地址
- `env_key`：读取 API Key 的环境变量名
- `wire_api`：必须为 `responses`

### 3. 配置 API Key

**方式一：临时设置（当前会话有效）**

```powershell
$env:OPENAI_API_KEY = "你的EvoLink API Key"
```

**方式二：永久设置**

```powershell
[Environment]::SetEnvironmentVariable("OPENAI_API_KEY", "你的EvoLink API Key", "User")
```

### 4. 支持的模型

| 模型名称 | 说明 |
|---------|------|
| `gpt-5.1` | GPT 5.1 |
| `gpt-5.2` | GPT 5.2 |

## 第三步：开始使用 Codex CLI

### 1. 进入安全的工作目录

```powershell
cd D:\mycode\CodexTest
```

### 2. 启动交互模式

```shell
codex
```

### 3. 单次问答模式

```shell
codex "你是谁"
```

如果返回正常响应，说明配置成功。

## 常见问题

### 1. 如何切换模型？
直接修改 `config.toml` 中的 `model` 字段即可。

### 2. 如何确认 EvoLink 配置生效？
执行 `codex "你是谁"`，如返回正常响应即配置成功。

### 3. 报错 401/403 怎么办？
优先检查是否已设置 `OPENAI_API_KEY`，以及 `env_key` 是否与环境变量名称一致。

### 4. 怎么上传图片？
- 方法一：直接引用图片路径
- 方法二：拖拽图片进终端
- 方法三：直接粘贴

## 注意

<Warning>
Codex CLI 尽量在安全的文件夹内打开，它只能读取当前工作目录内的文件。
</Warning>

<Tip>
配置文件中的 `wire_api` 必须设置为 `"responses"`，`"chat"` 已被弃用。
</Tip>
