---
title: "Gemini CLI"
description: "将 Gemini CLI 连接到 EvoLink.AI"
---

## 概述

![Gemini CLI 界面](/images/integration-guide/gemini-interface.png)

Gemini CLI 是 Google 官方推出的命令行工具，用于在终端环境中与 Gemini 系列大模型进行交互。
通过将 Gemini CLI 与 **EvoLink API** 进行配置集成，您可以突破官方模型限制，在命令行中直接调用 EvoLink 提供的多种 AI 能力，包括 **Gemini、GPT 以及 Claude 系列模型**，实现统一入口、多模型使用。

## 使用前准备

在开始配置之前，请确保已完成以下准备工作：

### 1. 安装 Node.js 与 npm

**为什么需要？** Node.js 是运行 CLI 工具的基础环境（类似手机需要安装微信才能聊天，电脑需要安装 Node.js 才能运行 CLI 工具）。

**如果已安装：** 运行 `node -v` 和 `npm -v` 检查版本，如果是 v20+，可跳过此步骤。

**首次安装：**
- 请从 [Node.js 官方网站](https://nodejs.org/) 下载并安装（推荐下载 LTS 长期支持版）
- 如果不熟悉安装流程，可参考 [菜鸟教程 - Node.js 安装配置](https://www.runoob.com/nodejs/nodejs-install-setup.html)
- 建议使用 **Node.js v20 或更高版本**
- 安装完成后，可通过以下命令验证：

```bash
node -v
npm -v
```

![Node.js 和 npm 版本验证](/images/integration-guide/claude-node-npm-verify.png)

### 2. 获取 EvoLink API Key

- 登录 [EvoLink 控制台](https://evolink.ai/dashboard)
- 在控制台中找到 API Keys，点击"创建新Key"按钮，然后复制生成的 Key
- API Key 通常以 `sk-` 开头，请妥善保存

## 如何打开命令行终端

<Tabs>
  <Tab title="Windows">
    - 方法一：按 `Win + R` 键，输入 `cmd` 或 `powershell`，按回车
    - 方法二：在开始菜单搜索"命令提示符"或"PowerShell"
    - 方法三：在文件夹中按住 Shift 键，右键点击空白处，选择"在此处打开 PowerShell 窗口"
  </Tab>
  <Tab title="macOS">
    - 方法一：按 `Command + 空格` 打开 Spotlight，输入 `Terminal`，按回车
    - 方法二：在"应用程序" → "实用工具" → "终端"
    - 注意：macOS 默认使用 zsh 终端（macOS 10.15+），旧版本使用 bash，两者都可以正常使用
  </Tab>
  <Tab title="Linux">
    - 方法一：按 `Ctrl + Alt + T` 快捷键
    - 方法二：在应用程序菜单中搜索"终端"或"Terminal"
  </Tab>
</Tabs>

## 第一步：安装 Gemini CLI

### 1. 安装命令

```bash
npm install -g @google/gemini-cli
```

**预期结果：** 会看到下载信息滚动，最后显示 `added XX packages` 表示成功（需要 1-3 分钟）。

**如果出错：** 提示 `permission denied` 时，Windows 需右键"以管理员身份运行" PowerShell，macOS/Linux 在命令前加 `sudo`。

### 2. 检验安装

```bash
gemini --version
```

**成功标志：** 显示版本号（如 `1.x.x`）。

![检验 Gemini CLI 安装](/images/integration-guide/gemini-version.png)

## 第二步：配置 EvoLink API

**⚠️ 重要提示：** Gemini CLI 的配置相比其他工具**稍微复杂一些**，需要修改安装文件。如果你是编程新手，建议优先使用 **Claude CLI** 或 **Codex CLI**（配置更简单）。

### 1. 找到安装目录

```bash
npm root -g
```

**你会看到类似路径：**
- Windows: `C:\Users\你的用户名\AppData\Roaming\npm\node_modules`
- macOS: `/usr/local/lib/node_modules`
- Linux: `/usr/lib/node_modules`

![找到 Gemini CLI 安装目录](/images/integration-guide/gemini-find-install-dir.png)

### 2. 修改 API 端点

需要修改 2 个文件：

![文件位置](/images/integration-guide/gemini-modify-api.png)
**文件 1：** `{安装目录}\@google\gemini-cli\node_modules\@google\genai\dist\node\index.mjs`

找到约第 **11222** 行：

```javascript
// 修改前
initHttpOptions.baseUrl = `https://generativelanguage.googleapis.com/`;

// 修改后
initHttpOptions.baseUrl = `https://api.evolink.ai/`;
```

![修改 mjs 文件](/images/integration-guide/gemini-mjs-modify.png)

**文件 2：** `{安装目录}\@google\gemini-cli\node_modules\@google\genai\dist\node\index.cjs`

找到约第 **11244** 行，做相同修改。

![修改 cjs 文件](/images/integration-guide/gemini-cjs-modify.png)

### 3. 配置 API Key

<Tabs>
  <Tab title="Windows PowerShell">
    **临时设置（当前会话有效）**
    ```powershell
    $env:GEMINI_API_KEY = "你的EvoLink API Key"
    ```

    **永久设置**
    ```powershell
    [Environment]::SetEnvironmentVariable("GEMINI_API_KEY", "你的EvoLink API Key", "User")
    ```
    设置后需要重启终端才能生效。

    **检验配置**
    ```powershell
    echo $env:GEMINI_API_KEY
    ```
    如果输出你的 API Key,说明配置成功。

    ![检查环境变量](/images/integration-guide/gemini-check-env.png)
  </Tab>
  <Tab title="macOS / Linux">
    **临时设置（当前会话有效）**
    ```bash
    export GEMINI_API_KEY="你的EvoLink API Key"
    ```

    **永久设置**
    编辑 `~/.bashrc` 或 `~/.zshrc`，添加：
    ```bash
    export GEMINI_API_KEY="你的EvoLink API Key"
    ```
    然后执行 `source ~/.bashrc` 或 `source ~/.zshrc` 使配置生效，或重启终端。

    **检验配置**
    ```bash
    echo $GEMINI_API_KEY
    ```
    如果输出你的 API Key，说明配置成功。
  </Tab>
</Tabs>

## 第三步：开始使用 Gemini CLI

### 1. 进入工作目录

```shell
cd <你的工作目录>
```

**说明：** 将 `<你的工作目录>` 替换为实际路径

### 2. 单次问答模式

```shell
gemini "你是谁"
```

### 3. 启动交互模式

```shell
gemini
```
![Gemini CLI 界面](/images/integration-guide/gemini-interface.png)

**成功标志：**
- 看到 AI 的回复内容（几行文字）
- **没有**出现 `401`、`403`、`API Key invalid` 等错误

**如果看到错误：**
- `401 Unauthorized`：API Key 未设置或无效 → 检查环境变量
- `403 Forbidden`：API Key 权限不足 → 检查 API 端点是否修改正确
- `Network error`：网络问题 → 检查网络连接

## 常见问题

### 1. Gemini CLI 是什么？主要用来做什么？
Gemini CLI 是 Google 官方推出的命令行工具，允许用户在终端中与 Gemini 模型进行交互。通过 EvoLink 配置后，还可以调用 GPT、Claude 等多种模型。

### 2. 第一次使用时，如何确认是否已经安装并配置成功？
依次执行以下命令验证：
- `node -v` 和 `npm -v`：确认 Node.js 和 npm 已安装
- `gemini --version`：确认 Gemini CLI 已安装
- `gemini "你是谁"`：确认 API 配置正确，能正常返回响应

### 3. 交互模式和单次命令模式有什么区别？
- **交互模式**：执行 `gemini` 进入持续对话，可多轮交互，适合复杂任务
- **单次命令模式**：执行 `gemini "问题"` 获取单次响应后退出，适合快速查询

### 4. Gemini CLI 会不会自动读取或上传我本地的文件和代码？
不会自动读取或上传。Gemini CLI 需要用户主动引用或授权才会读取文件内容，且会在执行敏感操作前请求确认。建议在专门的项目文件夹中使用。

### 5. 如何使用 Gemini CLI 分析或处理本地文件内容？
在交互模式中，可以通过以下方式引用文件：
- 直接输入文件路径让 Gemini 读取
- 拖拽文件到终端窗口

### 6. Gemini CLI 是否支持中文输入和中文输出？
完全支持。Gemini CLI 支持中文输入和输出，可以直接用中文提问并获得中文回答。

### 7. 执行后没有任何输出，可能是什么原因？
常见原因包括：
- 网络连接问题，无法访问 API 服务器
- API Key 无效或余额不足
- API 端点配置错误
- 防火墙或代理阻止了请求

### 8. 修改了 API 端点或环境变量后，为什么没有生效？
- 需要重新启动终端或命令行窗口
- 确认环境变量 `GEMINI_API_KEY` 已正确设置
- 确认 API 端点文件已正确修改（需要修改 node_modules 中的 .mjs 和 .cjs 文件）

### 9. 使用时出现 401/403 错误一般是什么原因？
- **401 错误**：`GEMINI_API_KEY` 未设置或 API Key 无效
- **403 错误**：API Key 权限不足或已过期
- 请检查 API 端点是否已修改为 `https://api.evolink.ai/`

### 10. Gemini CLI 适合哪些使用场景？又不适合哪些场景？
**适合的场景：**
- 代码编写、调试和重构
- 命令行环境下的快速问答
- 文件内容分析和处理
- 自动化脚本集成

**不适合的场景：**
- 需要图形界面的复杂交互
- 实时协作编辑
- 大规模文件批量处理

### 11. 如何切换模型？
在交互模式中输入 `/model` 命令即可切换模型。

![Gemini CLI 切换模型](/images/integration-guide/image-3.png)

目前支持的模型：
- `gemini-2.5-pro`
- `gemini-2.5-flash`
- `gemini-3-pro-preview`
- `gemini-3-flash-preview`

### 12. 怎么上传图片？
- 方法一：直接引用图片路径
- 方法二：拖拽图片进终端

以上方式均需用户主动操作，Gemini CLI 不会自动读取或上传本地图片。

## 注意

<Warning>
建议在专门的项目文件夹内启动 Gemini CLI，避免在敏感目录（如系统目录、包含密钥的目录）中运行。Gemini CLI 会以当前工作目录为起点进行文件操作。
</Warning>
